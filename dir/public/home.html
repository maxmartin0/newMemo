<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memo App - Home</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="top-text">
  <h1>Memo App</h1>
</div>

<div class="notes-container">
  <!-- Notes cards will be populated here -->
</div>
<button id="addNote" class="floating-button">+</button>

<script>
  async function loadNotes() {
    const notesContainer = document.querySelector('.notes-container');
    const res = await fetch('/notes');
    const notes = await res.json();
    notesContainer.innerHTML = notes.map(n => `
      <div class="card" onclick="location.href='/notes/${n.id}'">
        <h3>${n.title}</h3>
        <p>${n.content.substring(0, 50)}</p>
      </div>
    `).join('');
  }

  document.getElementById('addNote').addEventListener('click', async () => {
    const title = prompt("Note title?");
    if (title !== null) {
      await fetch('/notes', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: `title=${encodeURIComponent(title)}&content=`
      });
      loadNotes();
    }
  });

  loadNotes();
</script>
</body>
</html>
